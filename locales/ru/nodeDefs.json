{

    "darkilAdvancedVariableBuilder": {
        "display_name": "Расширенный построитель переменных [darkilNodes]",
        "description": "Создаёт переменную, значение которой собирается из динамических подстановок, условных выражений, опциональных значений по умолчанию и поддерживает случайные варианты. Все синтаксисы плейсхолдеров используют двойные фигурные скобки {{…}}.",
        "HELP_TEXT": "Справка узла – Расширенный построитель переменных\n\nЭтот узел создает переменную, значение которой собирается из динамических подстановок,\nусловных выражений, опциональных значений по умолчанию и поддерживает случайные варианты.\nВсе синтаксисы плейсхолдеров используют двойные фигурные скобки `{{…}}`.\n\nТипы плейсхолдеров:\n    {{var}}                – Вставить разрешённое значение другой переменной, определённой в INPUT_VAR или динамических входах DYNAMIC_*.\n    {\"text\"}               – Вставить буквальную строку (кавычки необязательны).\n    {{DATE}}               – Текущая дата в формате **YYYYMMDD**.\n    {{TIME}}               – Текущее время в формате **HHMMSS**.\n    {{IF:cond:true:false}}   – Если *cond* истинно, использовать *true*, иначе *false*.\n    {{IFNOT:cond:true:false}}– Как IF, но с отрицанием условия.\n    {{var??default}}       – Использовать *var*, если он не пустой; иначе подставить *default*.\n\nОсобые имена переменных:\n    default, def, _        – Разрешаются в «значение по умолчанию», переданное через INPUT_VAR (последняя строка без знака `=`).\n\nВозможности:\n    • Несколько значений для переменной могут быть разделены символом `|`; одно из них будет выбрано случайным образом.\n    • Логические выражения поддерживают `&&` (AND) и `||` (OR) с булевыми литералами или другими переменными.\n    • Циклические ссылки обнаруживаются; они приводят к пустой строке и генерируют предупреждение.\n    • Узел удаляет комментарии (`# …`) из шаблона перед обработкой.\n\nОпции:\n   - **switch**: Включить/выключить генерацию. При выключении узел возвращает пустую переменную (или только справочный текст, если включён параметр out_val_by_switch).\n   - **out_val_by_switch**: Если включено и switch отключен, выводится лишь справка вместо значения переменной.\n   - **var_name**: Имя переменной, которое будет добавлено к результату в виде `<имя> = <значение>`. Оставьте пустым для вывода чистого значения.\n   - **var_text**: Многострочный шаблон с плейсхолдерами.\n\nПример:\n    var_text = \"Hello {{user}}! Today is {{DATE}}.\"\n    INPUT_VAR = \"user = Alice\"\n\nРезультат (при настройках по умолчанию):\n    variable_name = Hello Alice! Today is 20231130\n\nИспользуйте динамические входы (`DYNAMIC_1`, `DYNAMIC_2`, …) для добавления дополнительных переменных во время выполнения.",
        "inputs": {
            "switch": {
                "name": "активно",
                "tooltip": "Включить/выключить генерацию переменной. При выключении возвращается пустая строка (или только справочный текст, если включён параметр out_val_by_switch)."
            },
            "out_val_by_switch": {
                "name": "результат, если активно",
                "tooltip": "Если включено и узел активен, выводит ключ-значение переменной. Если включено и узел не активен, на выходе - пустое значение. Если выключено, выводит только ключ (узел не активен), или ключ-значение (узел активен)."
            },
            "var_name": {
                "name": "имя переменной",
                "tooltip": "Префикс имени, который будет добавлен к результату в виде \"<имя> = <значение>\". Оставьте пустым для вывода чистого значения."
            },
            "var_text": {
                "name": "значение переменной",
                "tooltip": "Многострочный шаблон с плейсхолдерами {{...}}. Поддерживает комментарии (# …), условные конструкции и случайный выбор вариантов."
            },
            "INPUT_VAR": {
                "name": "переменные",
                "tooltip": "Опциональный ввод переменных в виде строк, разделённых переводами строки. Формат: имя = значение. При отсутствии знака \"=\" последняя строка считается значением по умолчанию."
            }
        },
        "outputs": {
            "0": {
                "name": "переменная",
                "tooltip": "Сгенерированное значение переменной."
            },
            "1": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilPromptBuilder": {
        "display_name": "Динамический промт [darkilNodes]",
        "description": "Позволяет построить промт, используя динамические переменные, которые отображаются в виде виджетов на ноде.",
        "HELP_TEXT": "Помощь по написанию промта:\n- Заполнители: {{NAME:TYPE:VALUE:DEFAULT:USE_INPUT}} определяют динамические значения.\n   * TYPE может быть STRING, INT, FLOAT, COMBO, SLIDER, KNOB.\n   * VALUE — текущее значение (или минимум для числовых типов).\n   * DEFAULT — запасное значение (или максимум для числовых типов).\n   * USE_INPUT (true/false) создаёт входной сокет для этого заполнителя, если true.\n\n- Теги-переключатели: [[TAG]]...[[/TAG]] или [[TAG:GROUP]]...[[/TAG]].\n   * Когда тег оценивается как false, вложенный блок удаляется.\n   * Теги с одинаковой GROUP являются взаимно исключающимися – включение одного отключает остальные.\n\n- Комментарии (игнорируются при обработке):\n   * // строковый комментарий\n   * # строковый комментарий\n   * /* многострочный комментарий */\n\n- Дополнительный блок (опционально): [%extra%]...[%/extra%].\n   * При наличии появляется переключатель «Extra text active».\n   * Если переключатель включён, блок обрабатывается так же, как основной промт (заполнители, теги, директивы).\n\n- Блок переменных (опционально): [%vars%]...[%/vars%] – игнорируется на бэкенде.\n\n- Блоки без пробелов:\n   * {%spaceless%}…{%spaceless stop%} или короткая форма {%sl%}…{%sl stop%}\n   * Всё избыточное whitespace (пробелы, переводы строк, табуляции) внутри блока сворачивается в один пробел и обрезается.\n\n- Директивы форматирования (можно вкладывать):\n   * lower (lw) – перевод текста в нижний регистр.\n   * upper (up) – перевод текста в верхний регистр.\n   * title (tl) – каждое слово с заглавной буквы.\n   * sentence (snt) – первая буква каждого предложения в верхний регистр.\n   * trim (tr) – удаление начальных и конечных пробелов.\n   * dedent (dd) – убрать общие отступы (как textwrap.dedent).\n   * collapse_newlines (cnl) – сократить несколько подряд идущих переводов строк до одного.\n   * strip_punct (sp) – удалить все знаки пунктуации.\n   * unescape_html (uneh) – декодировать HTML-сущности (&, < …).\n   * list (cl) – очистить список: убрать пустые строки и обрезать ведущие пробелы.\n   * list_rtrim (clr) – очистить список и обрезать обе стороны каждой строки.\n   * list_and (la) – преобразовать список в строку через запятую, заменив последнюю запятую на «and».\n\n- UI-переключатели (только клиентская часть):\n   * Prompt enabled – отключает всю обработку основного промта, когда выключено.\n   * Extra enabled – управляет тем, будет ли обрабатываться блок extra.\n   * Main Prompt visible – скрывает/показывает виджет ввода промта.\n\n- Выходы:\n   * итоговый промт – обработанный основной промт (пустой, если отключён).\n   * экстра – обработанный блок extra (пустой, если отсутствует или выключен).\n   * ❓справка – этот текст справки.\n\nВесь остальной текст остаётся без изменений в скомпилированном выводе.",
        "inputs": {
            "prompt": {
                "name": "промт",
                "tooltip": "начальный промт с переменными и группами"
            }
        },
        "outputs": {
            "0": {
                "name": "итоговый промт",
                "tooltip": "Сгенерированный на основе переменных промт."
            },
            "1": {
                "name": "экстра",
                "tooltip": "Сгенерированный на основе переменных блок `[%extra%]...[%extra%]`"
            },
            "2": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilTextVariableBuilder": {
        "display_name": "Построитель переменных [darkilNodes]",
        "description": "Создаёт и манипулирует текстовыми переменными с поддержкой подстановок, условий и случайных вариантов.",
        "HELP_TEXT": "Узел помогает создавать и изменять текстовые переменные.\n\nВходы:\n   - **активно** (BOOLEAN): Включить или отключить генерацию вывода.\n   - **результат, если активно** (BOOLEAN): Если включено, узел возвращает пустую строку, когда `switch` выключен.\n   - **имя переменной** (STRING): Имя переменной для присвоения. Оставьте пустым, чтобы получить только значение.\n   - **значение переменной** (STRING): Шаблон текста с поддержкой подстановок и сокращений.\n   - **переменные** (опционально, различные типы): Определите дополнительные переменные в формате `name=value` по строкам.\n\nПодстановки в `var_value`:\n    - `{{variable}}` – заменяется значением определённой переменной.\n    - `{{default}}` или `{{}}` – вставляет значение по умолчанию из INPUT_VAR (одна строка).\n    - `{{DATE}}` / `{{TIME}}` – текущая дата (YYYYMMDD) или время (HHMMSS).\n   - Условные: `{{IF:cond:true:false}}` или `{{IFNOT:cond:true:false}}`, где *cond* может быть булевым, именем переменной или выражением.\n   - Запасной вариант: `{{var??\"fallback\"}}` – использует *var*, если определён, иначе строку‑запас.\n\nТакже можно использовать случайные варианты в значениях INPUT_VAR через `|`, например `greeting=Hello|Hi|Hey`.",        "inputs": {
            "switch": {
                "name": "активно",
                "tooltip": "Включить (True) или отключить (False) генерацию вывода."
            },
            "out_val_by_switch": {
                "name": "результат, если активно",
                "tooltip": "Если True и switch = False, вернуть пустую строку."
            },
            "var_name": {
                "name": "имя переменной",
                "tooltip": "Имя переменной для присвоения (например, \"myVar\"). Оставьте пустым для вывода только значения."
            },
            "var_value": {
                "name": "значение переменной",
                "tooltip": "Текстовый шаблон с поддержкой {{подстановок}}."
            },
            "INPUT_VAR": {
                "name": "переменные",
                "tooltip": "Список дополнительных переменных в виде \"имя=значение\" (каждая на новой строке)."
            }
        },
        "outputs": {
            "0": {
                "name": "переменная",
                "tooltip": "Сгенерированная строка переменной (или \"имя = значение\")."
            },
            "1": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilWan22VideoLoraListBuilder": {
        "display_name": "Список LoRA Wan 2.2 [darkilNodes]",
        "description": "Разбирает текстовый список определений LoRA и выводит два обработанных списка: для моделей с низким и высоким шумом.",
        "HELP_TEXT": "Этот узел разбирает текстовый список определений LoRA для узлов WanVideoWrapper от Kijai и выдаёт два списка:\n\n- low-noise (LORA_LOW)\n- high-noise (LORA_HIGH).\n\nФормат входных данных\n- Передайте строку (или список строк), где каждая строка описывает один LoRA.\n- Элементы могут разделяться переводами строки, точкой с запятой ; или вертикальной чертой |.\n- Синтаксис: <ИмяLoRA>[:<силa>]\n    - <ИмяLoRA> – подстрока, совпадающая с именем файла в папке loras ComfyUI.\n    - Необязательная <силa> переопределяет силу по умолчанию (значение берётся из параметра узла).\n\nКомментарии\n- Блочные комментарии /* ... */ и строковые комментарии // ... игнорируются.\n\nНазначение для low/high модели\n- Префиксами, указывающими только на low-noise модель, являются: l<<, l<, <low:, low:.\n- Префиксы для high-noise модели: h<<, h<, <high:, high:.\n- Без префикса LoRA применяется к обеим моделям.\n\nВыбор блоков\n- Передайте словарь через необязательный вход blocks. Ожидаются ключи:\n    - selected_blocks – отображение имён блоков в булевы значения.\n    - layer_filter – (опционально) строковый фильтр слоёв.\n\nДополнительные флаги\n- low_mem_load: если true, LoRA будет загружаться в режиме низкого потребления памяти.\n- merge_loras: если true, несколько LoRA могут быть объединены в один тензор при возможности.\n\nСлияние с предыдущими списками\n- Передайте предыдущие low/high списки через prev_low / prev_high. Узел добавит их в начало новых списков.\n\nТретий вывод – это справочный текст для ссылки.",
        "inputs": {
            "input_list": {
                "name": "текст с LoRA",
                "tooltip": "Строка (или список строк) с определениями LoRA. Поддерживает разделители ';', '|', новые строки."
            },
            "default_lora_strength": {
                "name": "вес LoRA по умолчанию",
                "tooltip": "Значение веса по умолчанию, используемое если в списке не указано явно."
            },
            "prev_low": {
                "name": "пред.список LoRA low-модели",
                "tooltip": "Список LoRA, который будет добавлен к новому списку для модели с низким шумом."
            },
            "prev_high": {
                "name": "пред.список LoRA high-модели",
                "tooltip": "Список LoRA, который будет добавлен к новому списку для модели с высоким шумом."
            },
            "blocks": {
                "name": "выбор блоков",
                "tooltip": "Словарь с выбранными блоками (ключ selected_blocks) и фильтром слоёв."
            },
            "low_mem_load": {
                "name": "низкое потребление памяти",
                "tooltip": "Если включено, LoRA будет загружаться в режиме низкого потребления памяти."
            },
            "merge_loras": {
                "name": "объединять LoRA",
                "tooltip": "Если включено, несколько LoRA могут быть объединены в один тензор при возможности."
            }},
        "outputs": {
            "0": {
                "name": "LoRA для Low-модели",
                "tooltip": "Список словарей с параметрами LoRA для модели с низким шумом."
            },
            "1": {
                "name": "LoRA для High-модели",
                "tooltip": "Список словарей с параметрами LoRA для модели с высоким шумом."
            },
            "2": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilMultiToggles": {
        "display_name": "Динамические переключатели [darkilNodes]",
        "description": "Узел позволяет выбирать несколько вариантов (или один из всех) и выводит их как список или строку.",
        "HELP_TEXT": "Узел:\n- Выходы:\n  1. as_list — список выбранных значений переключателей.\n  2. as_string — человеко‑читаемая строка, объединяющая выборки с помощью delimiter. Если задан last_word и выбрано более одного элемента, вставляет last_word перед последним элементом (например, “a, b и c”).\n  3. ❓help — это описание справки.\n\nНастройки UI (через свойства узла):\n- text_for_toggles — определяет варианты переключателей как список меток, разделённых точкой с запятой (;) или вертикальной чертой (|), опционально в виде пар label::value.\n- is_radio_toggles — при включении переключатели работают как радиокнопки (может быть активен только один).\n- trim_values — удаляет пробелы из значений переключателей перед обработкой.\n- last_word — пользовательское слово, вставляемое перед последним элементом в объединённой строке.\n- delimiter — строка, используемая для соединения элементов (по умолчанию “, ”).",
        "inputs": {
            "last_word": {
                "name": "последнее слово (СВОЙСТВО)",
                "tooltip": "Слово, вставляемое перед последним элементом в строке (если более одного выбора)."
            },
            "delimiter": {
                "name": "разделитель (СВОЙСТВО)",
                "tooltip": "Строка, используемая для соединения элементов (по умолчанию \", \")."
            },
            "trim_values": {
                "name": "очистить пробелы (СВОЙСТВО)",
                "tooltip": "Очищать пробелы в строке с двух сторон, перед выводом"
            },
            "is_radio_toggles": {
                "name": "выбор только одного (СВОЙСТВО)",
                "tooltip": "Режим, в котором можно выбрать только одно значение из всех"
            },
            "text_for_toggles": {
                "name": "описание списка значений (СВОЙСТВО)",
                "tooltip": "Строка со списком значений, разделенных `;` или `|`. Для задания псевдонима, указывается - `псевдоним::значение` "
            }
        },
        "outputs": {
            "0": {
                "name": "список",
                "tooltip": "Список выбранных значений переключателей."
            },
            "1": {
                "name": "строка",
                "tooltip": "Человекочитаемая строка с объединёнными выборами."
            },
            "2": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilCustomCombo": {
        "display_name": "Динамический список выбора [darkilNodes]",
        "description": "Узел позволяет выбирать значение из динамически задаваемого списка через свойство text_for_combo.",
        "HELP_TEXT": "Выберите вариант из пользовательского списка комбобокса, определённого в свойстве узла text_for_combo. Для разделения нескольких элементов используйте ';' или '|'. Выбранное значение выводится как str_selected, а этот справочный текст появляется на втором выходе (❓help).",
        "inputs": {
            "list_selector": {
                "name": "вариант",
                "tooltip": "Выбор из пользовательского списка, определённого свойством text_for_combo."
            },
            "text_for_combo": {
                "name": "описание списка значений (СВОЙСТВО)",
                "tooltip": "Строка со списком значений, разделенных `;` или `|`."
            }
        },
        "outputs": {
            "0": {
                "name": "строка",
                "tooltip": "Выбранный вариант."
            },
            "1": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    },

    "darkilFilesList": {
        "display_name": "Список файлов [darkilNodes]",
        "description": "Получает список файлов из указанной папки с возможностью фильтрации, сортировки и настройки формата вывода.",
        "HELP_TEXT": "Список файлов в папке по шаблону glob. Параметры:\n- folder_path (STRING): путь к директории.\n- files_extension (STRING): фильтр расширений; может быть простым расширением (например, “png”) или любым шаблоном glob (например, \".txt\").\n- sort_by (COMBO): метод сортировки – по дате, имени, размеру и их убывающим вариантам.\n- sub_foldres (BOOL): если true, выполнять рекурсивный поиск в подпапках.\n- keep_extensions (BOOL): сохранять расширения файлов в выводе.\n- keep_full_path (BOOL): возвращать полные абсолютные пути вместо только имён файлов.\n\nВыходы:\n1. found_list – список имён/путей файлов.\n2. found_as_text – строка всех файлов, разделённых переводом строки.\n3. last_filename – имя/путь последнего файла после сортировки.\n4. first_filename – имя/путь первого файла после сортировки.\n5. files_count – общее количество найденных файлов.\n6. ❓help – этот справочный текст.\n\nЕсли папка не существует или не содержит подходящих файлов, узел возвращает пустой список.",
        "inputs": {
            "folder_path": {
                "name": "путь к папке",
                "tooltip": "Полный путь к директории, из которой будет получен список файлов."
            },
            "files_extension": {
                "name": "фильтр расширений",
                "tooltip": "Расширение или glob-шаблон (например, \"png\" или \".txt\")."
            },
            "sort_by": {
                "name": "сортировка",
                "tooltip": "Метод сортировки: по дате, имени, размеру и их убывающие варианты."
            },
            "sub_foldres": {
                "name": "рекурсивный поиск",
                "tooltip": "Если включено, искать файлы во всех вложенных подпапках."
            },
            "keep_extensions": {
                "name": "сохранять расширения",
                "tooltip": "Оставлять расширения файлов в выводе."
            },
            "keep_full_path": {
                "name": "полный путь",
                "tooltip": "Возвращать абсолютный путь к файлу вместо только имени."
            }
        },
        "outputs": {
            "0": {
                "name": "список файлов",
                "tooltip": "Список найденных имён/путей файлов."
            },
            "1": {
                "name": "файлы - строкой",
                "tooltip": "Все файлы, разделённые переводом строки."
            },
            "2": {
                "name": "последний файл",
                "tooltip": "Последний файл после сортировки."
            },
            "3": {
                "name": "первый файл",
                "tooltip": "Первый файл после сортировки."
            },
            "4": {
                "name": "количество",
                "tooltip": "Общее количество найденных файлов."
            },
            "5": {
                "name": "❓справка",
                "tooltip": "Текст справки по использованию узла."
            }
        }
    }

}
